<!-- Futuristic Profile Component -->
<main class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-purple-900 relative overflow-hidden">

    <!-- Animated Background Elements -->
    <div class="absolute inset-0 overflow-hidden pointer-events-none">
        <!-- Grid Pattern -->
        <div class="absolute inset-0 opacity-5">
            <div class="grid grid-cols-12 h-full">
                @for (i of [1,2,3,4,5,6,7,8,9,10,11,12]; track i) {
                <div class="border-r border-cyan-400/20"></div>
                }
            </div>
        </div>
        <!-- Floating Particles -->
        <div class="absolute top-32 left-20 w-2 h-2 bg-cyan-400 rounded-full animate-pulse opacity-60"></div>
        <div class="absolute top-64 right-32 w-1 h-1 bg-purple-400 rounded-full animate-ping opacity-40"></div>
        <div class="absolute bottom-32 left-1/3 w-1 h-1 bg-cyan-300 rounded-full animate-pulse opacity-50"></div>
    </div>

    <div class="relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Quantum Header -->
        <div class="text-center mb-12">
            <div class="relative mb-8">
                <h1
                    class="text-5xl font-black bg-gradient-to-r from-cyan-400 via-blue-400 to-purple-400 bg-clip-text text-transparent">
                    QUANTUM PROFILE
                </h1>
                <div
                    class="absolute inset-0 bg-gradient-to-r from-cyan-400/20 via-blue-400/20 to-purple-400/20 blur-2xl -z-10">
                </div>
            </div>
            <p class="text-gray-300 text-lg">
                Manage your <span class="text-cyan-400 font-semibold">Digital Identity</span>
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Profile Card -->
            <div class="lg:col-span-1">
                <div
                    class="bg-gradient-to-br from-slate-800/50 to-blue-900/50 backdrop-blur-xl rounded-2xl border border-cyan-400/30 p-6 shadow-2xl shadow-cyan-500/10">
                    <!-- Profile Avatar -->
                    <div class="text-center mb-6">
                        <div class="relative inline-block">
                            <div
                                class="w-24 h-24 bg-gradient-to-r from-cyan-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-user text-slate-900 text-2xl"></i>
                            </div>
                            <div
                                class="absolute -bottom-2 -right-2 w-8 h-8 bg-gradient-to-r from-green-400 to-cyan-400 rounded-full flex items-center justify-center border-2 border-slate-800">
                                <i class="fas fa-check text-slate-900 text-xs"></i>
                            </div>
                        </div>
                        <h3 class="text-xl font-bold text-white mb-1">{{ userData.name }}</h3>
                        <p class="text-cyan-400 text-sm">{{ userData.email || 'user@nexus.com' }}</p>
                        <span
                            class="inline-block px-3 py-1 bg-gradient-to-r from-green-500/20 to-cyan-500/20 border border-green-400/30 rounded-full text-green-300 text-xs mt-2">
                            âš¡ ACTIVE NEXUS MEMBER
                        </span>
                    </div>

                    <!-- Quick Actions -->
                    <div class="space-y-3">
                        <button
                            class="w-full bg-gradient-to-r from-cyan-400/20 to-blue-500/20 border border-cyan-400/30 text-cyan-300 py-2 px-4 rounded-lg hover:bg-cyan-400/30 transition-all duration-300 text-sm">
                            <i class="fas fa-edit mr-2"></i>Edit Profile
                        </button>
                        <button
                            class="w-full bg-gradient-to-r from-purple-400/20 to-pink-500/20 border border-purple-400/30 text-purple-300 py-2 px-4 rounded-lg hover:bg-purple-400/30 transition-all duration-300 text-sm">
                            <i class="fas fa-cog mr-2"></i>Settings
                        </button>
                    </div>
                </div>
            </div>

            <!-- Profile Information -->
            <div class="lg:col-span-2">
                <div
                    class="bg-gradient-to-br from-slate-800/50 to-blue-900/50 backdrop-blur-xl rounded-2xl border border-cyan-400/30 p-6 shadow-2xl shadow-cyan-500/10">

                    <!-- Tabs -->
                    <div class="flex space-x-1 mb-6 bg-slate-900/50 rounded-lg p-1">
                        <button (click)="activeTab = 'personal'"
                            [class]="activeTab === 'personal' ? 'bg-gradient-to-r from-cyan-400 to-blue-500 text-slate-900' : 'text-gray-400 hover:text-cyan-300'"
                            class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-300">
                            <i class="fas fa-user mr-2"></i>Personal Info
                        </button>
                        <button (click)="activeTab = 'orders'"
                            [class]="activeTab === 'orders' ? 'bg-gradient-to-r from-cyan-400 to-blue-500 text-slate-900' : 'text-gray-400 hover:text-cyan-300'"
                            class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-300">
                            <i class="fas fa-shopping-bag mr-2"></i>Orders
                        </button>
                        <button (click)="activeTab = 'security'"
                            [class]="activeTab === 'security' ? 'bg-gradient-to-r from-cyan-400 to-blue-500 text-slate-900' : 'text-gray-400 hover:text-cyan-300'"
                            class="flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-300">
                            <i class="fas fa-shield-alt mr-2"></i>Security
                        </button>
                    </div>

                    <!-- Tab Content -->
                    <div class="space-y-6">

                        <!-- Personal Info Tab -->
                        @if (activeTab === 'personal') {
                        <form [formGroup]="personalInfoForm" (ngSubmit)="updateProfile()" class="space-y-4">

                            <!-- Success Message -->
                            @if (profileSuccess) {
                            <div
                                class="bg-gradient-to-r from-green-500/30 to-emerald-500/30 border border-green-400/50 rounded-xl p-4 backdrop-blur-sm">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-check-circle text-green-400"></i>
                                    <span class="text-green-300 text-sm">{{ profileSuccess }}</span>
                                    <button type="button" (click)="profileSuccess = null"
                                        class="ml-auto text-green-300 hover:text-green-100">
                                        <i class="fas fa-times text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            }

                            <!-- Error Message -->
                            @if (profileError) {
                            <div
                                class="bg-gradient-to-r from-red-500/30 to-pink-500/30 border border-red-400/50 rounded-xl p-4 backdrop-blur-sm">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-exclamation-triangle text-red-400"></i>
                                    <span class="text-red-300 text-sm">{{ profileError }}</span>
                                    <button type="button" (click)="profileError = null"
                                        class="ml-auto text-red-300 hover:text-red-100">
                                        <i class="fas fa-times text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            }

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-cyan-400 text-sm font-semibold mb-2">Full Name</label>
                                    <input type="text" formControlName="name"
                                        class="w-full bg-slate-900/70 border border-cyan-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/50 focus:outline-none transition-all duration-300"
                                        [class.border-red-400]="isFieldInvalid('personal', 'name')">
                                    @if (isFieldInvalid('personal', 'name')) {
                                    <div class="text-red-400 text-xs mt-1">
                                        <i class="fas fa-exclamation-circle mr-1"></i>
                                        {{ getFieldError('personal', 'name') }}
                                    </div>
                                    }
                                </div>
                                <div>
                                    <label class="block text-cyan-400 text-sm font-semibold mb-2">Email</label>
                                    <input type="email" formControlName="email"
                                        class="w-full bg-slate-900/70 border border-cyan-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/50 focus:outline-none transition-all duration-300"
                                        [class.border-red-400]="isFieldInvalid('personal', 'email')">
                                    @if (isFieldInvalid('personal', 'email')) {
                                    <div class="text-red-400 text-xs mt-1">
                                        <i class="fas fa-exclamation-circle mr-1"></i>
                                        {{ getFieldError('personal', 'email') }}
                                    </div>
                                    }
                                </div>
                                <div>
                                    <label class="block text-cyan-400 text-sm font-semibold mb-2">Phone</label>
                                    <input type="tel" formControlName="phone" placeholder="Optional"
                                        class="w-full bg-slate-900/70 border border-cyan-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/50 focus:outline-none transition-all duration-300"
                                        [class.border-red-400]="isFieldInvalid('personal', 'phone')">
                                    @if (isFieldInvalid('personal', 'phone')) {
                                    <div class="text-red-400 text-xs mt-1">
                                        <i class="fas fa-exclamation-circle mr-1"></i>
                                        {{ getFieldError('personal', 'phone') }}
                                    </div>
                                    }
                                </div>
                                <div>
                                    <label class="block text-cyan-400 text-sm font-semibold mb-2">Join Date</label>
                                    <input type="text" [value]="userProfile.joinDate" readonly
                                        class="w-full bg-slate-900/30 border border-gray-600/30 rounded-lg px-4 py-3 text-gray-400 cursor-not-allowed">
                                </div>
                            </div>
                            <button type="submit" [disabled]="personalInfoForm.invalid || isUpdatingProfile"
                                class="bg-gradient-to-r from-cyan-400 to-blue-500 text-slate-900 font-bold py-3 px-6 rounded-lg hover:shadow-lg hover:shadow-cyan-400/50 transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
                                @if (isUpdatingProfile) {
                                <i class="fas fa-spinner fa-spin mr-2"></i>
                                Updating...
                                } @else {
                                <i class="fas fa-save mr-2"></i>
                                Save Changes
                                }
                            </button>
                        </form>
                        }

                        <!-- Orders Tab -->
                        @if (activeTab === 'orders') {
                        <div class="space-y-4">
                            <div class="text-center py-12">
                                <div
                                    class="w-16 h-16 bg-gradient-to-r from-cyan-400/20 to-blue-500/20 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-shopping-bag text-cyan-400 text-2xl"></i>
                                </div>
                                <h3 class="text-gray-300 text-lg mb-2">No Orders Yet</h3>
                                <p class="text-gray-500 text-sm mb-6">Start shopping to see your quantum orders here</p>
                                <button routerLink="/products"
                                    class="bg-gradient-to-r from-cyan-400 to-blue-500 text-slate-900 font-bold py-2 px-6 rounded-lg hover:shadow-lg hover:shadow-cyan-400/50 transition-all duration-300">
                                    <i class="fas fa-rocket mr-2"></i>Start Shopping
                                </button>
                            </div>
                        </div>
                        }

                        <!-- Security Tab -->
                        @if (activeTab === 'security') {
                        <form [formGroup]="passwordForm" (ngSubmit)="updatePassword()" class="space-y-4">

                            <!-- Success Message -->
                            @if (passwordSuccess) {
                            <div
                                class="bg-gradient-to-r from-green-500/30 to-emerald-500/30 border border-green-400/50 rounded-xl p-4 backdrop-blur-sm">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-check-circle text-green-400"></i>
                                    <span class="text-green-300 text-sm">{{ passwordSuccess }}</span>
                                    <button type="button" (click)="passwordSuccess = null"
                                        class="ml-auto text-green-300 hover:text-green-100">
                                        <i class="fas fa-times text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            }

                            <!-- Error Message -->
                            @if (passwordError) {
                            <div
                                class="bg-gradient-to-r from-red-500/30 to-pink-500/30 border border-red-400/50 rounded-xl p-4 backdrop-blur-sm">
                                <div class="flex items-center space-x-3">
                                    <i class="fas fa-exclamation-triangle text-red-400"></i>
                                    <span class="text-red-300 text-sm">{{ passwordError }}</span>
                                    <button type="button" (click)="passwordError = null"
                                        class="ml-auto text-red-300 hover:text-red-100">
                                        <i class="fas fa-times text-sm"></i>
                                    </button>
                                </div>
                            </div>
                            }

                            <div class="grid grid-cols-1 gap-4">
                                <div>
                                    <label class="block text-cyan-400 text-sm font-semibold mb-2">Current
                                        Password</label>
                                    <input type="password" formControlName="currentPassword"
                                        placeholder="Enter current password"
                                        class="w-full bg-slate-900/70 border border-cyan-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/50 focus:outline-none transition-all duration-300"
                                        [class.border-red-400]="isFieldInvalid('password', 'currentPassword')">
                                    @if (isFieldInvalid('password', 'currentPassword')) {
                                    <div class="text-red-400 text-xs mt-1">
                                        <i class="fas fa-exclamation-circle mr-1"></i>
                                        {{ getFieldError('password', 'currentPassword') }}
                                    </div>
                                    }
                                </div>
                                <div>
                                    <label class="block text-cyan-400 text-sm font-semibold mb-2">New Password</label>
                                    <input type="password" formControlName="newPassword"
                                        placeholder="Enter new password"
                                        class="w-full bg-slate-900/70 border border-cyan-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/50 focus:outline-none transition-all duration-300"
                                        [class.border-red-400]="isFieldInvalid('password', 'newPassword')">
                                    @if (isFieldInvalid('password', 'newPassword')) {
                                    <div class="text-red-400 text-xs mt-1">
                                        <i class="fas fa-exclamation-circle mr-1"></i>
                                        {{ getFieldError('password', 'newPassword') }}
                                    </div>
                                    }
                                </div>
                                <div>
                                    <label class="block text-cyan-400 text-sm font-semibold mb-2">Confirm New
                                        Password</label>
                                    <input type="password" formControlName="confirmPassword"
                                        placeholder="Confirm new password"
                                        class="w-full bg-slate-900/70 border border-cyan-400/30 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-cyan-400 focus:ring-2 focus:ring-cyan-400/50 focus:outline-none transition-all duration-300"
                                        [class.border-red-400]="isFieldInvalid('password', 'confirmPassword') || isPasswordMismatch()"
                                        [class.border-green-400]="passwordForm.get('confirmPassword')?.valid && !isPasswordMismatch() && passwordForm.get('confirmPassword')?.value">
                                    @if (isFieldInvalid('password', 'confirmPassword')) {
                                    <div class="text-red-400 text-xs mt-1">
                                        <i class="fas fa-exclamation-circle mr-1"></i>
                                        {{ getFieldError('password', 'confirmPassword') }}
                                    </div>
                                    } @else if (isPasswordMismatch()) {
                                    <div class="text-red-400 text-xs mt-1">
                                        <i class="fas fa-times-circle mr-1"></i>
                                        Passwords do not match
                                    </div>
                                    } @else if (passwordForm.get('confirmPassword')?.value && !isPasswordMismatch()) {
                                    <div class="text-green-400 text-xs mt-1">
                                        <i class="fas fa-check-circle mr-1"></i>
                                        Passwords match
                                    </div>
                                    }
                                </div>
                            </div>

                            <!-- Password Requirements -->
                            <div class="bg-slate-900/30 border border-cyan-400/20 rounded-lg p-4">
                                <h4 class="text-cyan-400 text-sm font-semibold mb-2">
                                    <i class="fas fa-info-circle mr-2"></i>Password Requirements
                                </h4>
                                <div class="grid grid-cols-1 gap-1 text-xs text-gray-400">
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-cyan-400"></i>
                                        <span>At least 8 characters long</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-cyan-400"></i>
                                        <span>Include uppercase and lowercase letters</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <i class="fas fa-check text-cyan-400"></i>
                                        <span>Include at least one number and special character</span>
                                    </div>
                                </div>
                            </div>

                            <button type="submit" [disabled]="passwordForm.invalid || isUpdatingPassword"
                                class="bg-gradient-to-r from-red-400 to-pink-500 text-white font-bold py-3 px-6 rounded-lg hover:shadow-lg hover:shadow-red-400/50 transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none">
                                @if (isUpdatingPassword) {
                                <i class="fas fa-spinner fa-spin mr-2"></i>
                                Updating...
                                } @else {
                                <i class="fas fa-key mr-2"></i>
                                Update Password
                                }
                            </button>
                        </form>
                        }

                    </div>
                </div>
            </div>

        </div>
    </div>
</main>